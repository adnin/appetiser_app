(function(e){function t(t){for(var n,a,s=t[0],i=t[1],u=t[2],l=0,d=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);f&&f(t);while(d.length)d.shift()();return c.push.apply(c,u||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,a=1;a<r.length;a++){var i=r[a];0!==o[i]&&(n=!1)}n&&(c.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={app:0},c=[];function a(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-007aee4c":"6946e08f","chunk-3ae2c808":"5a7b1192","chunk-2d0d6d35":"80157763","chunk-2d2086b7":"5a4b9de0"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r=o[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=n);var c,i=document.createElement("script");i.charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.src=a(e);var u=new Error;c=function(t){i.onerror=i.onload=null,clearTimeout(l);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+c+")",u.name="ChunkLoadError",u.type=n,u.request=c,r[1](u)}o[e]=void 0}};var l=setTimeout((function(){c({type:"timeout",target:i})}),12e4);i.onerror=i.onload=c,document.head.appendChild(i)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var f=u;c.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23"),o={class:"mt-10"};function c(e,t,r,c,a,s){var i=Object(n["B"])("Header"),u=Object(n["B"])("router-view");return Object(n["w"])(),Object(n["f"])(n["a"],null,[Object(n["i"])(i),Object(n["g"])("div",o,[Object(n["i"])(u)])],64)}r("b0c0");var a={class:"bg-white shadow-md h-16 fixed top-0 inset-x-0"},s={class:"max-w-7xl mx-auto px-2"},i={class:"flex justify-between"},u=Object(n["g"])("div",null,[Object(n["g"])("a",{href:"#",class:"flex items-center py-5 px-2 text-gray-700 hover:text-gray-900"},[Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-blue-600 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Object(n["g"])("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})]),Object(n["g"])("span",{class:"font-bold"},"User Registration System")])],-1),l={class:"flex pt-3 text-gray-600"},f=Object(n["g"])("span",{class:"font-bold mr-1"},"Logout",-1),d=Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-1 text-red-600 hover:text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Object(n["g"])("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),p=Object(n["g"])("span",{class:"font-bold"},"Logout",-1),m=[f,d,p],g=Object(n["g"])("span",{class:"font-bold mr-1"},"Login",-1),h=Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-1 text-blue-600 hover:text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Object(n["g"])("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})],-1),b=Object(n["g"])("span",{class:"font-bold"},"Login",-1),v=[g,h,b];function j(e,t,r,o,c,f){return Object(n["w"])(),Object(n["f"])("nav",a,[Object(n["g"])("div",s,[Object(n["g"])("div",i,[u,Object(n["g"])("div",l,[f.isLoggedIn?(Object(n["w"])(),Object(n["f"])("button",{key:0,onClick:t[0]||(t[0]=function(){return f.logout&&f.logout.apply(f,arguments)}),type:"submit",class:"flex absolute right-0 top-0 mt-5 mr-5"},m)):"Login"!==this.$route.name?(Object(n["w"])(),Object(n["f"])("button",{key:1,onClick:t[1]||(t[1]=function(){return f.login&&f.login.apply(f,arguments)}),class:"flex absolute right-0 top-0 mt-5 mr-5"},v)):Object(n["e"])("",!0)])])])])}var w=r("1da1"),O=(r("96cf"),r("b64b"),{name:"Header",computed:{isLoggedIn:function(){return this.$store.getters.isAuthenticated&&this.$store.getters.currentUser&&Object.keys(this.$store.getters.currentUser).length>0}},methods:{logout:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("logout");case 2:e.$router.push("/login");case 3:case"end":return t.stop()}}),t)})))()},login:function(){this.$router.push("/login")}}}),k=r("6b0d"),x=r.n(k);const y=x()(O,[["render",j]]);var A=y,T={components:{Header:A}};const P=x()(T,[["render",c]]);var _=P,L=(r("d3b7"),r("3ca3"),r("ddb0"),r("6c02")),S={class:"py-6"},B=Object(n["g"])("main",null,[Object(n["g"])("div",{class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},[Object(n["g"])("div",{class:"px-4 py-6 sm:px-0"},[Object(n["g"])("div",{class:"border-4 border-dashed border-gray-200 rounded-lg h-96"})])])],-1);function H(e,t,r,o,c,a){var s=Object(n["B"])("Banner");return Object(n["w"])(),Object(n["f"])("div",S,[Object(n["i"])(s,{message:"Login successful"}),B])}var R={class:"bg-green-500"},E={class:"max-w-7xl mx-auto py-3 px-3 sm:px-6 lg:px-8"},M={class:"flex items-center justify-between flex-wrap"},C={class:"w-0 flex-1 flex items-center"},V=Object(n["g"])("span",{class:"flex p-2 rounded-lg bg-green-700"},[Object(n["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Object(n["g"])("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-2m-4-1v8m0 0l3-3m-3 3L9 8m-5 5h2.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293h3.172a1 1 0 00.707-.293l2.414-2.414a1 1 0 01.707-.293H20"})])],-1),$={class:"ml-3 font-medium text-white truncate"},U={id:"banner_message",class:"md:inline"};function q(e,t,r,o,c,a){return Object(n["w"])(),Object(n["f"])("div",R,[Object(n["g"])("div",E,[Object(n["g"])("div",M,[Object(n["g"])("div",C,[V,Object(n["g"])("p",$,[Object(n["g"])("span",U,Object(n["D"])(r.message),1)])])])])])}var I={name:"Banner",props:["message"]};const J=x()(I,[["render",q]]);var z=J,D={name:"Home",components:{Banner:z}};const F=x()(D,[["render",H]]);var G=F,K=r("ade3"),N=(r("99af"),r("bc3a")),Q=r.n(N),W="https://baseplate-api.appetiserdev.tech/api/v1",X="appetiser_secret_token",Y=function(){return localStorage.getItem(X)},Z=function(e){localStorage.setItem(X,e)},ee=function(){localStorage.removeItem(X)},te={getToken:Y,saveToken:Z,destroyToken:ee},re=Q.a.create({baseURL:W});re.interceptors.request.use((function(e){var t=te.getToken();return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),Q.a.interceptors.response.use(void 0,(function(e){if(e){var t=e.config;if(401===e.response.status&&!t._retry)return t._retry=!0,store.dispatch("logout"),router.push("/login")}}));var ne,oe,ce={query:function(e,t){return Object(w["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.abrupt("return",re.get(e,t));case 4:throw r.prev=4,r.t0=r["catch"](0),new Error("[Appetiserdev] ApiService ".concat(r.t0));case 7:case"end":return r.stop()}}),r,null,[[0,4]])})))()},get:function(e){var t=arguments;return Object(w["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:"",r.prev=1,r.abrupt("return",re.get("".concat(e,"/").concat(n)));case 5:throw r.prev=5,r.t0=r["catch"](1),new Error("[Appetiserdev] ApiService ".concat(r.t0));case 8:case"end":return r.stop()}}),r,null,[[1,5]])})))()},post:function(e,t){return re.post("".concat(e),t)},update:function(e,t,r){return re.put("".concat(e,"/").concat(t),r)},put:function(e,t){return re.put("".concat(e),t)},delete:function(e){return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",re.delete(e));case 4:throw t.prev=4,t.t0=t["catch"](0),new Error("[Appetiserdev] ApiService ".concat(t.t0));case 7:case"end":return t.stop()}}),t,null,[[0,4]])})))()}},ae=ce,se=r("6c33"),ie="logOut",ue="setUser",le="setError",fe={errors:null,user:{},hasToken:!!te.getToken(),isAuthenticated:!!te.getToken()},de={currentUser:function(e){return e.user},isAuthenticated:function(e){return e.isAuthenticated},hasToken:function(e){return e.hasToken}},pe=(ne={},Object(K["a"])(ne,se["b"],(function(e,t){return new Promise((function(r,n){ae.post("/auth/login",t).then((function(t){var n=t.data;e.commit(ue,n),r(n)})).catch((function(t){var r=t.response;return r?r.data.errors?(e.commit(le,r.data.errors),n(r)):(e.commit(le,[r.data.message]),n(r)):e.commit(le,null)}))}))})),Object(K["a"])(ne,se["c"],(function(e){e.commit(ie)})),Object(K["a"])(ne,se["f"],(function(e,t){return new Promise((function(r,n){ae.post("/auth/verification/verify",t).then((function(t){var n=t.data;return e.commit(le,null),r(n)})).catch((function(t){var r=t.response;return r?r.data.errors?(e.commit(le,r.data.errors),n(r)):(e.commit(le,[r.data.message]),n(r)):e.commit(le,null)}))}))})),Object(K["a"])(ne,se["d"],(function(e,t){return new Promise((function(r,n){ae.post("/auth/register",t).then((function(t){var n=t.data;return e.commit(se["e"],n),r(n)})).catch((function(t){var r=t.response;return r?(e.commit(le,r.data.errors),n(r)):e.commit(le,null)}))}))})),Object(K["a"])(ne,se["a"],(function(e){te.getToken()?(ae.setHeader(),ae.get("/users").then((function(t){var r=t.data;e.commit(ue,r.user)})).catch((function(t){var r=t.response;if(!r)return e.commit(le,null);e.commit(le,r.data.errors)}))):e.commit(ie)})),ne),me=(oe={},Object(K["a"])(oe,le,(function(e,t){e.errors=t})),Object(K["a"])(oe,ue,(function(e,t){e.isAuthenticated=!0,e.user=t.data,e.errors={},te.saveToken(t.data.access_token)})),Object(K["a"])(oe,se["e"],(function(e,t){e.errors={},e.isAuthenticated=!1,e.hasToken=!0,console.log(e.hasToken,t),te.saveToken(t.data.access_token)})),Object(K["a"])(oe,ie,(function(e){e.isAuthenticated=!1,e.user={},e.errors={},te.destroyToken()})),oe),ge={state:fe,actions:pe,mutations:me,getters:de},he=r("5502"),be=Object(he["a"])({state:{},mutations:{},actions:{},modules:{auth:ge}}),ve=[{path:"/",name:"Home",component:G,meta:{requiresAuth:!0}},{path:"/register",name:"Register",component:function(){return Promise.all([r.e("chunk-3ae2c808"),r.e("chunk-2d0d6d35")]).then(r.bind(null,"73cf"))},meta:{guest:!0}},{path:"/verification",name:"Verification",component:function(){return r.e("chunk-007aee4c").then(r.bind(null,"22ff"))},meta:{toVerify:!0}},{path:"/login",name:"Login",component:function(){return Promise.all([r.e("chunk-3ae2c808"),r.e("chunk-2d2086b7")]).then(r.bind(null,"a55b"))},meta:{guest:!0}}],je=Object(L["a"])({history:Object(L["b"])("/"),routes:ve});je.beforeEach((function(e,t,r){if(e.matched.some((function(e){return e.meta.requiresAuth}))){if(be.getters.isAuthenticated)return void r();r("/register")}else r()})),je.beforeEach((function(e,t,r){if(console.log(be.getters.hasToken),e.matched.some((function(e){return e.meta.toVerify}))){if(be.getters.hasToken)return void r();r("/register")}else r()})),je.beforeEach((function(e,t,r){if(e.matched.some((function(e){return e.meta.guest}))){if(be.getters.isAuthenticated&&be.getters.toVerify)return void r("/");r()}else r()}));var we=je,Oe=(r("ba8c"),Object(n["c"])(_));Oe.use(be),Oe.use(we),Oe.provide("axios",Oe.config.globalProperties.axios),Oe.mount("#app")},"6c33":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return a})),r.d(t,"f",(function(){return s})),r.d(t,"e",(function(){return i}));var n="checkAuth",o="login",c="logout",a="register",s="verify",i="set_token"},ba8c:function(e,t,r){}});
//# sourceMappingURL=app.93f4c83d.js.map